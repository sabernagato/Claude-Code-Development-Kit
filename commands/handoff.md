您正在结束 VR 语言学习应用项目的工作，需要为下一个 AI 会话创建一份全面的交接文档。此命令智能分析您当前会话的成果，并结合自动检测的进度和用户提供的上下文来更新交接文档。

## 自动加载的项目上下文：
@docs/ai-context/HANDOFF.md
@/CLAUDE.md

## 步骤 1：处理用户参数

灵活处理参数：
- **带参数**：`$ARGUMENTS` 提供关于完成或尝试内容的用户上下文
- **无参数**：纯粹依靠会话分析的自动检测

用户提供的上下文："$ARGUMENTS"

## 步骤 2：分析当前会话成果

思考在此会话中完成了什么，以及如何最好地为交接捕获这些内容。回顾您最近的对话和工具使用情况，以识别重要工作：

**自动检测的证据：**
- **文件操作**（Write、Edit、MultiEdit 工具）- 修改了哪些文件以及原因
- **新功能** - 添加或实现的功能
- **错误修复** - 解决的问题或调试尝试
- **架构更改** - 结构改进或重构
- **配置更新** - 设置、依赖项或环境更改
- **文档工作** - 文档文件的更新
- **未完成的工作** - 未能完成的尝试
- **遇到的阻碍** - 阻止完成的问题

**生成会话摘要：**
```
会话分析：
- 主要工作区域：[受影响的组件/领域]
- 主要成就：[关键成果]
- 修改的文件：[更改文件列表]
- 状态：[已完成/进行中/受阻]
- 用户上下文：[如果提供了 $ARGUMENTS]
```

## 步骤 3：分析自动加载的 HANDOFF.md

分析自动加载的 `docs/ai-context/HANDOFF.md` 以了解：
- **现有部分**及其当前状态
- **相关的进行中工作**可能与您的会话相关联
- **结构和格式**模式以保持一致性
- **不相关的内容**应该被保留

## 步骤 4：确定更新策略

思考如何根据此会话的工作最好地更新交接文档。基于您的会话分析和自动加载的现有交接内容，决定：

**如果当前工作与现有任务相关：**
- 使用新进度更新现有部分
- 将成就添加到"已完成的工作"
- 如果已解决，更新"当前状态"和"当前问题"
- 根据新状态修改"下一步"

**如果当前工作是新的/不相关的：**
- 创建带有描述性标题的新部分
- 包含用于会话识别的时间戳
- 遵循现有文档结构和格式

**如果工作完成了现有任务：**
- 将任务标记为已完成
- 总结最终结果
- 考虑归档或删除完全解决的任务

## 步骤 5：智能更新 HANDOFF.md

对自动加载的 HANDOFF.md 进行有针对性的更新：

### 对于新部分，包括：
```markdown
## [任务标题] - [状态]

### 当前状态
[当前状态的简要描述]

### 已完成的工作
[带文件路径的具体成就项目列表]

### 当前问题（如果适用）
[任何阻碍或未解决的问题]

### 实现 [目标] 的下一步
[可继续的可操作项目]

### 需要审查的关键文件
[按类别组织的相关文件列表]

### 下一个会话的上下文
[重要的连续性说明]
```

### 对于现有部分的更新：
- **添加到成就**而不重复现有内容
- **更新状态**如果进度改变了情况
- **修改当前问题**如果问题已解决或发现新问题
- **刷新下一步**基于新进度

## 步骤 6：维护文档质量

确保您的更新遵循这些准则：

**内容质量：**
- **具体**：包括确切的文件路径和技术细节
- **可操作**：为继续提供清晰的下一步
- **有上下文**：解释决策背后的理由
- **当前**：反映会话后的实际状态

**格式一致性：**
- 遵循现有的 markdown 结构和模式
- 使用一致的标题级别和格式
- 保持项目符号样式和组织
- 保留文档的整体结构

**信息管理：**
- **不要重复**现有信息，除非更新它
- **保留不相关的**不属于您工作的部分
- **整合**相关信息而不是分散它
- **适当归档**已完成的工作

## 步骤 7：最终验证

在完成之前，验证您的交接：
- **准确反映**会话中完成的内容
- **结合**自动检测的技术更改与用户提供的上下文
- **为下一个 AI 会话提供明确方向**
- **与现有交接内容保持连续性**
- **对接手工作的人立即可操作**

## 质量标准

**全面但简洁：**
- 包括所有相关技术细节
- 专注于可操作的信息
- 避免与现有内容冗余

**保持专业的交接质量：**
- 清晰的问题陈述和当前状态
- 具体的文件引用和技术上下文
- 基于当前进度的逻辑下一步
- 有助于加快下一个会话的上下文

这种智能交接方法确保 AI 会话之间的平稳连续性，同时捕获所完成工作的技术现实和用户对工作的看法。

现在分析您的会话，将其与用户上下文"$ARGUMENTS"结合，并相应地更新交接文档。
