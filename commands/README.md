# 🔧 命令模板

编排模板，使 Claude Code 能够协调多代理工作流程，以完成不同的开发任务。

## 概述

在阅读[主要套件文档](../README.md)后，您将了解这些命令如何融入集成系统。每个命令：

- **自动加载**适合其任务的文档层级
- **生成专业代理**基于复杂性 
- **集成 MCP 服务器**当需要外部专业知识时
- **维护文档**以保持 AI 上下文的时效性

### 🚀 自动上下文注入

所有命令都受益于通过 `subagent-context-injector.sh` 钩子的自动上下文注入：

- **核心文档自动加载**：每个命令和子代理都会自动接收 `@/docs/CLAUDE.md`、`@/docs/ai-context/project-structure.md` 和 `@/docs/ai-context/docs-overview.md`
- **无需手动加载上下文**：由命令生成的子代理自动访问基本项目文档
- **一致的知识**：所有代理都从相同的基础理解开始

## 可用命令

### 📊 `/full-context`
**用途**：当您需要深入理解或计划执行代码更改时，进行全面的上下文收集和分析。

**使用时机**：
- 开始处理新功能或错误
- 需要了解系统如何相互连接
- 规划架构更改
- 任何需要在实施前进行彻底分析的任务

**工作原理**：根据请求复杂性自适应扩展，从直接分析到多代理编排。代理读取文档、分析代码、映射依赖关系，并根据需要咨询 MCP 服务器。

### 🔍 `/code-review` 
**用途**：获得多个专家对代码质量的看法，专注于高影响力的发现而不是挑剔细节。

**使用时机**：
- 实施新功能后
- 合并重要更改前
- 需要安全性、性能和架构洞察时
- 需要对代码质量有信心时

**工作原理**：生成专门的代理（安全性、性能、架构），并行分析。每个代理专注于对生产代码重要的关键问题。

### 📝 `/update-docs`
**用途**：保持文档与代码更改同步，确保 AI 上下文保持最新。

**使用时机**：
- 修改代码后
- 添加新功能后
- 项目结构发生变化时
- 任何重大实施后

**工作原理**：分析发生了什么变化，并更新所有层级中相应的 CLAUDE.md 文件。维护未来 AI 会话将依赖的上下文。

### 📄 `/create-docs`
**用途**：为缺乏 AI 优化文档的现有项目生成初始文档结构。

**使用时机**：
- 在现有项目中采用该框架
- 从头开始编写文档
- 需要记录遗留代码
- 设置 3 层结构

**工作原理**：分析您的项目结构，并在每个层级创建适当的 CLAUDE.md 文件，为 AI 辅助开发奠定基础。

### ♻️ `/refactor`
**用途**：在保持功能不变的同时智能地重构代码，并更新所有依赖项。

**使用时机**：
- 拆分大文件
- 改进代码组织
- 提取可重用组件
- 清理技术债务

**工作原理**：分析文件结构、映射依赖关系、识别逻辑分割点，并处理整个代码库中的所有导入/导出更新。

### 🤝 `/handoff`
**用途**：在结束会话或对话变得太长时保留上下文。

**使用时机**：
- 结束工作会话
- 接近上下文限制
- 在主要任务之间切换
- 用永久存储补充 `/compact`

**工作原理**：使用会话成就、当前状态和后续步骤更新交接文档。确保在未来会话中顺利继续。

## 集成模式

### 典型工作流
```bash
/full-context "implement user notifications"    # 理解
# ... 实现功能 ...
/code-review "review notification system"       # 验证  
/update-docs "document notification feature"    # 同步
/handoff "completed notification system"        # 保存
```

### 快速分析
```bash
/full-context "why is the API slow?"           # 调查
# ... 应用修复 ...
/update-docs "document performance fixes"       # 更新上下文
```

### 主要重构
```bash
/full-context "analyze authentication module"   # 了解当前状态
/refactor "@auth/large-auth-file.ts"          # 重构
/code-review "review refactored auth"          # 验证质量
/update-docs "document new auth structure"     # 保持文档最新
```

## 自定义

每个命令模板都可以调整：

- **调整代理策略** - 修改生成多少代理及其专业化
- **更改上下文加载** - 自定义加载哪些文档层级
- **调整 MCP 集成** - 调整何时咨询外部服务
- **修改输出格式** - 根据您的偏好定制结果

命令存储在 `.claude/commands/` 中，可以直接编辑。

## 关键原则

1. **命令协同工作** - 每个命令都建立在其他命令的输出之上
2. **文档保持最新** - 命令维护自己的上下文
3. **复杂性自然扩展** - 简单任务保持简单，复杂任务获得复杂分析
4. **上下文连续** - 信息通过文档在会话之间流动

---

*有关每个命令的详细实现，请参阅此目录中的各个命令文件。*